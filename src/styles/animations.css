/* ═══════════════════════════════════════════════════════
   HSK App — Tang Dynasty Animations
   M3 Expressive Motion System
   ═══════════════════════════════════════════════════════ */

/* ── Entrance Animations ── */

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes inkBleedIn {
    from {
        opacity: 0;
        filter: blur(4px);
    }

    to {
        opacity: 1;
        filter: blur(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes cardSlideIn {
    from {
        opacity: 0;
        transform: translateY(12px) scale(0.97);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ── Feedback Animations ── */

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-5px);
    }

    75% {
        transform: translateX(5px);
    }
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

/* ── Tang Dynasty Stamp Effect ── */

@keyframes stampBounce {
    0% {
        transform: translate(-50%, -50%) scale(0.3) rotate(-15deg);
        opacity: 0;
    }

    40% {
        transform: translate(-50%, -50%) scale(1.15) rotate(3deg);
        opacity: 1;
    }

    60% {
        transform: translate(-50%, -50%) scale(0.95) rotate(-1deg);
    }

    80% {
        transform: translate(-50%, -50%) scale(1.02) rotate(0deg);
    }

    100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        opacity: 0.9;
    }
}

@keyframes stamp-in {
    0% {
        transform: scale(0.5) rotate(-5deg);
        opacity: 0;
    }

    50% {
        transform: scale(1.1) rotate(2deg);
        opacity: 1;
    }

    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

/* ── Spring Pop (for feedback text, celebrations) ── */

@keyframes feedbackPop {
    0% {
        transform: scale(0.8);
        opacity: 0;
    }

    50% {
        transform: scale(1.1);
        opacity: 1;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes titlePop {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* ── Session Complete Stagger ── */

@keyframes sessionSlideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes statSlideIn {
    from {
        opacity: 0;
        transform: translateY(10px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ── Level Up / Celebration ── */

@keyframes levelUpBurst {
    0% {
        transform: scale(0.3) rotate(-10deg);
        opacity: 0;
        filter: blur(10px);
    }

    30% {
        transform: scale(1.3) rotate(5deg);
        opacity: 1;
        filter: blur(0);
    }

    50% {
        transform: scale(0.9) rotate(-2deg);
    }

    70% {
        transform: scale(1.1) rotate(1deg);
    }

    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

@keyframes glowPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.5;
    }

    50% {
        transform: scale(1.2);
        opacity: 0.8;
    }
}

/* XP floating animation */
@keyframes xpFloat {
    0% {
        transform: translateY(0);
        opacity: 1;
    }

    100% {
        transform: translateY(-40px);
        opacity: 0;
    }
}

/* ── Utility Classes ── */

.animate-fade-in {
    animation: fadeIn var(--duration-normal) var(--ease-standard);
}

.animate-fade-up {
    animation: fadeUp var(--duration-slow) var(--ease-expressive-decelerate);
}

.animate-ink-bleed {
    animation: inkBleedIn 0.4s var(--ease-standard);
}

.animate-scale {
    animation: scaleIn var(--duration-normal) var(--ease-spring);
}

.animate-pulse {
    animation: pulse 2s infinite;
}

.animate-shake {
    animation: shake 0.3s var(--ease-standard);
}

.animate-stamp {
    animation: stamp-in 0.4s var(--ease-spring) both;
}

.animate-bounce {
    animation: bounce 0.6s var(--ease-spring);
}

.animate-stamp-in {
    animation: stamp-in 0.5s var(--ease-spring) both;
}

.animate-slide-up {
    animation: fadeUp var(--duration-slow) var(--ease-expressive-decelerate) both;
}

.animate-stat-slide {
    animation: statSlideIn 0.4s var(--ease-expressive-decelerate) both;
}

.animate-xp-float {
    animation: feedbackPop 0.5s var(--ease-spring) both;
}

/* ── Success Stamp Overlay — "正" stamp on perfect scores ── */

.success-stamp-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    font-family: var(--font-chinese);
    font-size: 5rem;
    font-weight: 900;
    color: var(--tang-red);
    opacity: 0.15;
    pointer-events: none;
    animation: stampBounce 0.6s var(--ease-spring) 0.3s both;
    z-index: 1;
}

/* ── Answer Feedback Stamps ── */

.answer-stamp {
    font-size: 1.5rem;
    color: var(--hsk-jade);
    animation: feedbackPop 0.3s var(--ease-spring) both;
}

.answer-correction {
    font-size: 1.5rem;
    color: var(--tang-red);
    animation: shake 0.3s var(--ease-standard);
}

/* ── Hover Effects ── */

.hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-tang-hover);
}

.hover-scale:hover {
    transform: scale(1.05);
}

/* ── Focus Visible — Cinnabar ring ── */

*:focus-visible {
    outline: 2px solid var(--tang-red);
    outline-offset: 2px;
}